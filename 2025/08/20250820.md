# AWS RDS

## 概要

- セクション6 【基礎編】 サーバーを機能ごとに分割しよう

## 学んだこと

### 既存のアーキテクチャの課題

- WebサーバーとDBサーバーが同一のため、拡張するたびにDBが増える
  - 一方は更新した内容が表示、一方は更新した内容が表示されないという問題が起きる

- WebサーバーとDBサーバーを分離
  - 今後に備えてRDSも用意

- Amazon RDS
  - マネージドのデータベースサービスのこと
  - マネージドとは？
    - 要はほとんどをAWS側で管理すること
    - ハードウェアからスケーラビリティもろもろ全部AWS側で用意できる
    - 機材を用意しなくて良い
    - 運用負荷が軽減できる
  - 今回はAmazon Auroraを利用
    - MySQL およびPostgreSQL と互換性があるクラウド向けリレーションサービス
    - 処理性能が高い 
      - MySQLの5倍
      - PostgreSQLの3倍
    - 耐障害性
      - 3AZ に 6つのデータをコピー
    - Auroraの制限
      - DBエンジンのバージョンがAWS側が用意したものしか選択できない
      - DBインスタンスのスペックに上限あり
      - DBインスタンスのOSにログインできない
    - DBインスタンスクラス
      - db.t2.micro や db.r5.xlargeなど
        - db ... 全てにつく
        - t,r ... インスタンスファミリー
          - t,m 汎用
          - r,x,z メモリ最適化
        - 2,5 ... インスタンス世代
          - 数字が大きい方が新しい
        - micro, xlarge ... インスタンスサイズ
    - ストレージ
      - 汎用SSDかプロビジョンドIOPSを選択
      - 増やすことはできるが、減らすことができない
    - マルチAZ配置
      - 予備を作成しておき、メインで障害が起きたら、自動でサブに切り替えられるようにする配置のこと
      - それぞれスタンバイインスタンス、プライマリインスタンスと呼ぶ
      - 接続先IPアドレスを登録しておき、これを切り替えることで流用
    - リードレプリカ
      - 読み取り専用のDBインスタンス
      - 負荷軽減のため利用
      - 商品情報を見るだけなら、DBは読み取りだけ
      - にもかかわらずメインDBに書き込みと読み取り両方で負荷をかけるのは、レスポンスが悪くなりよくない
      - プライマリインスタンスと非同期で繋げておくことで、プライマリインスタンスの負荷を下げる目的
    - DBサブネットグループ
      - DBインスタンスを配置するサブネットを指定
      - DBインスタンスを作る前に指定
      - 必ず2つ設定
      - 仮にDBインスタンスが1つでも2つ指定
        - 後からマルチAZ配置に変えられるようにするため
      - 基本はprivateサブネットだが、publicサブネットを指定することもできる
    - スナップショット
      - 自動的なバックアップ
        - トランザクションログと、スナップショットを1日1回自動で取得
    - リストア
      - スナップショットからDBインスタンスを作成
    - ポイントインタイムリカバリ
      - 5分以上前の指定した時間の状態で、DBインスタンスを作成できる
    - リネーム
      - 仮に使っていたインスタンスが死んだ場合に、新しいものをprimaryの名称に変えられる

## 現状のアーキテクチャの課題

- 1つ落ちたら全部機能停止してしまう

## どうやったら改善できるか?

- 冗長構成を目指す
- サーバーの台数を増やす

## 質問

質問1: RDSにおけるパラメータグループとは何か？

RDSのパラメータグループの概要と機能について説明しました
データベースエンジンの設定を管理するコンテナであること
再利用可能性、カスタマイズ性、動的・静的パラメータの違いなどの特徴
具体的な使用例について回答しました

質問2: AuroraでDBパラメータグループが選択肢に表示されない問題

DBパラメータグループを作成後、Auroraクラスター作成時に選択肢に表示されない原因を質問されました
主な原因として以下を説明しました：

Auroraでは「DBクラスターパラメータグループ」が必要であること
エンジンファミリーの不一致（aurora-mysql8.0など専用ファミリーが必要）
バージョンの不一致


解決方法として、適切なDBクラスターパラメータグループの作成手順をご案内しました

## 料金体系

RDS DB インスタンス 稼働時間に対して発生
停止しても最大7日後に自動で起動される

## 試験での出題ポイント

- よく出る問題のパターン
- 引っかけやすいポイント

## 参考リンク

- [AWS公式ドキュメント](URL)
- [参考記事](URL)

---
**Date:** 2025-08-20
**Category:** #aws #saa  
**Service:** #rds など
