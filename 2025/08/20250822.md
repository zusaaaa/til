# AWS EC2 Auto Scaling CloudWatch

## 概要

- セクション[8] 【基礎編】自動でスケールする設定をしよう

## 学んだこと

### EC2 Auto Scaling

- 自動でインスタンス数を増減する機能
  - 最小と最大を設定できる

- 起動設定(起動するための各種設定)
  - AMI(どの権限で増やすか)
  - インスタンスタイプ
  - セキュリティグループ
  - キーペア
  - IAMロール
- Auto Scaling Group
  - 起動設定
  - 最小、最大
  - VPC,サブネット
  - ELB/ALB
  - スケーリングポリシー etc...
- スケーリング方法
  - 手動スケーリング
    - 利用者が数を設定してEC2の数を変える方法
  - スケジュールスケーリング
    - 指定された日時に基づいて数の増減を行う
  - 動的なスケーリング
    - 3種類ある
      - シンプルなスケーリング
        - 1つのメトリクスに対して1つのしきい値を設定
        - CPU使用率が80%を超えたら、インスタンス1つ追加など
      - ステップスケーリング
        - 1つのメトリクスに対して複数のしきい値を設定
          - CPU使用率が80%を超える時、90%を超える時などで段階的設定を行う
      - ターゲットスケーリング
        - 1つのメトリクスに対してターゲット値を設定
        - ターゲット値 CPU使用率 50%
        - CPU使用率が50%になるよう自動的に数を調整してくれる
    - それぞれのスケーリングで必ず条件を満たすと増減すると無駄が発生する場合がある
    - ある程度増減を決定するためのバッファを持たせる設定がある
      - クールダウン
        - 指定した時間内はAuto Scalingを実施しないようにする
      - ウォームアップ
        - 複数のしきい値を超過した際に、差分のEC2インスタンスを作成
          - CPU使用率 80% → EC2 1つ追加
          - CPU使用率 90% → EC2 2つ追加
          - ウォームアップ設定あり、ウォームアップ期間中なら、80%90%を超えても1つずつしか追加されなくなる

### Amazon CloudWatch

- モニタリングに関する各機能を提供
  - それぞれ標準で搭載されるメトリクスとユーザーが指定した値を確認できるユーザーメトリクスの2種類がある
  - ex. CPU使用率、ネットワーク通信量
  - ex. メモリ使用率、ディスク使用率
- CloudWatch Alarm
  - メトリクスのしきい値を超えたら何かを行う機能
  - ex. EC2のCPU使用率が80%を超えたら再起動を行うなど
- CloudWatch Logs
  - ログファイルの保存、閲覧、監視ができる機能

## 小テストミス

- Auto Scalingで動的なスケーリングを3つ
  - シンプルなスケーリング
  - ステップスケーリング
  - ターゲットスケーリング

## 現状のアーキテクチャの課題

- 

## どうやったら改善できるか?

- 
- 

## 料金体系

- 

## 質問

## 試験での出題ポイント

- よく出る問題のパターン
- 引っかけやすいポイント

## 参考リンク

- [AWS公式ドキュメント](URL)
- [参考記事](URL)

---
**Date:** 2025-08-23  
**Category:** #aws #saa  
**Service:** #EC2 #AutoScaling #CloudWatch
